option optcr = 0.01;

set i  /1*25/;

*Index([ 0,  1,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 14, 15, 17, 18, 19, 21, 22, 24, 25, 27, 28, 29, 30], dtype='int64')
*[16, 9, 3, 8, 1]
alias (i,j);

Table
dist(i,j)
    1       2       3       4       5       6       7       8       9       10      11      12      13      14      15      16      17      18      19      20      21      22      23      24      25
1   9999    0.60    0.28    0.25    0.84    1.00    0.88    0.74    0.68    0.70    0.97    1.04    1.27    1.23    1.29    1.45    1.62    1.48    1.47    1.72    1.99    1.88    1.81    1.70    0.83
2   0.60    9999    0.40    0.60    0.23    0.44    0.43    0.44    0.56    0.73    0.95    0.87    0.79    1.33    1.19    1.58    1.15    1.10    1.18    1.86    2.14    1.47    1.46    1.43    0.92
3   0.28    0.40    9999    0.19    0.62    0.74    0.60    0.45    0.41    0.48    0.75    0.78    0.98    1.07    1.06    1.31    1.34    1.19    1.20    1.59    1.87    1.59    1.53    1.43    0.65
4   0.25    0.60    0.19    9999    0.82    0.91    0.74    0.57    0.45    0.44    0.71    0.81    1.11    0.97    1.04    1.20    1.45    1.27    1.24    1.48    1.75    1.68    1.59    1.46    0.57
5   0.84    0.23    0.62    0.82    9999    0.28    0.39    0.50    0.68    0.87    1.05    0.91    0.67    1.44    1.23    1.69    1.01    1.03    1.14    1.97    2.25    1.36    1.38    1.39    1.06
6   1.00    0.44    0.74    0.91    0.28    9999    0.22    0.42    0.62    0.82    0.93    0.73    0.38    1.32    1.04    1.56    0.72    0.75    0.88    1.82    2.10    1.07    1.09    1.12    0.98
7   0.88    0.43    0.60    0.74    0.39    0.22    9999    0.20    0.40    0.59    0.70    0.53    0.39    1.10    0.84    1.34    0.75    0.67    0.76    1.61    1.88    1.05    1.03    1.01    0.76
8   0.74    0.44    0.45    0.57    0.50    0.42    0.20    9999    0.20    0.40    0.54    0.43    0.54    0.93    0.75    1.18    0.89    0.74    0.77    1.46    1.74    1.14    1.08    1.02    0.57
9   0.68    0.56    0.41    0.45    0.68    0.62    0.40    0.20    9999    0.19    0.38    0.37    0.70    0.76    0.66    1.01    1.02    0.82    0.79    1.29    1.57    1.22    1.13    1.02    0.37
10  0.70    0.73    0.48    0.44    0.87    0.82    0.60    0.40    0.19    9999    0.27    0.39    0.86    0.60    0.59    0.84    1.14    0.90    0.83    1.13    1.41    1.30    1.19    1.04    0.18
11  0.97    0.95    0.75    0.71    1.05    0.93    0.70    0.54    0.38    0.27    9999    0.26    0.85    0.39    0.33    0.63    1.06    0.77    0.65    0.91    1.19    1.15    1.00    0.82    0.18
12  1.04    0.87    0.78    0.81    0.91    0.73    0.53    0.43    0.37    0.39    0.26    9999    0.59    0.61    0.32    0.83    0.80    0.52    0.44    1.09    1.36    0.91    0.79    0.65    0.41
13  1.27    0.79    0.98    1.11    0.67    0.38    0.39    0.54    0.70    0.86    0.85    0.59    9999    1.20    0.83    1.41    0.36    0.38    0.55    1.65    1.91    0.69    0.71    0.77    0.97
14  1.23    1.33    1.07    0.97    1.44    1.32    1.10    0.93    0.76    0.60    0.39    0.61    1.20    9999    0.43    0.24    1.35    1.03    0.86    0.53    0.81    1.34    1.16    0.92    0.42
15  1.29    1.19    1.06    1.04    1.23    1.04    0.84    0.75    0.66    0.60    0.33    0.32    0.83    0.43    9999    0.59    0.93    0.60    0.42    0.82    1.07    0.91    0.73    0.51    0.51
16  1.45    1.58    1.31    1.20    1.69    1.56    1.34    1.18    1.01    0.84    0.63    0.83    1.41    0.24    0.60    9999    1.53    1.20    1.01    0.28    0.56    1.46    1.27    1.02    0.66
17  1.62    1.15    1.34    1.45    1.01    0.72    0.75    0.89    1.02    1.14    1.06    0.80    0.36    1.35    0.93    1.53    9999    0.32    0.53    1.73    1.95    0.38    0.48    0.65    1.22
18  1.48    1.10    1.19    1.27    1.03    0.75    0.67    0.74    0.82    0.90    0.77    0.52    0.38    1.03    0.60    1.20    0.32    9999    0.20    1.40    1.63    0.40    0.35    0.39    0.94
19  1.47    1.18    1.20    1.24    1.14    0.88    0.76    0.77    0.79    0.83    0.65    0.44    0.55    0.86    0.42    1.01    0.53    0.20    9999    1.20    1.42    0.49    0.35    0.24    0.83
20  1.72    1.86    1.59    1.48    1.97    1.82    1.61    1.46    1.29    1.13    0.91    1.09    1.65    0.53    0.82    0.28    1.73    1.40    1.20    9999    0.28    1.61    1.41    1.16    0.94
21  1.99    2.14    1.87    1.75    2.25    2.10    1.88    1.74    1.57    1.41    1.19    1.36    1.91    0.81    1.07    0.56    1.95    1.63    1.42    0.28    9999    1.80    1.59    1.34    1.23
22  1.88    1.47    1.59    1.68    1.36    1.07    1.05    1.14    1.22    1.30    1.15    0.91    0.69    1.34    0.91    1.46    0.38    0.40    0.49    1.61    1.80    9999    0.20    0.45    1.32
23  1.81    1.46    1.53    1.59    1.38    1.09    1.03    1.08    1.13    1.19    1.00    0.79    0.71    1.16    0.73    1.27    0.48    0.35    0.35    1.41    1.59    0.20    9999    0.25    1.18
24  1.70    1.43    1.43    1.46    1.39    1.12    1.01    1.02    1.02    1.04    0.82    0.65    0.77    0.92    0.51    1.02    0.65    0.39    0.24    1.16    1.34    0.45    0.25    9999    1.00
25  0.83    0.92    0.65    0.57    1.06    0.98    0.76    0.57    0.37    0.18    0.18    0.41    0.97    0.42    0.51    0.66    1.22    0.94    0.83    0.94    1.23    1.32    1.18    1.00    9999;

variable
z;

Binary Variable
x(i,j);

Positive Variable
u(i);
Integer Variable
m;
* m: Numero de empleados
* u(i): numero de nodos visitados antes del nodo i

Equations
obj,
r1, r2, r3, r4, r5, r6
subtours;

obj.. z=E=sum((i,j),x(i,j)*(dist(i,j)/10 + 0.5));

r1.. sum((i,j) $ (ord(i) = 1 and ord(j) <> 1), x(i,j)) =E= 3;
r2.. sum((i,j) $ (ord(j) = 1 and ord(i) <> 1), x(i,j)) =E= 3;
r3(j)$(ord(j) <> 1).. sum(i, x(i,j)) =E= 1;
r4(i)$(ord(i) <> 1).. sum(j, x(i,j)) =E= 1;
r5.. sum((i,j),x(i,j)*(dist(i,j)/10 + 0.5)) =L= 8*3;
r6.. sum((i,j),dist(i,j)*x(i,j)) =G= 0;
* la suma de las horas trabajadas de todos los empleados tiene que ser menor que
* 8 veces el numero de empleados

subtours(i,j)$(ord(i)<> 1 and ord(j) <> 1 and ord(i) <> ord(j)).. u(i)-u(j)+card(i)*x(i,j)=L=card(i)-1;
* eliminacion de subrutas


model tsp1 /all/;
solve tsp1 using MIP min z;